<!DOCTYPE html>
<!--
  Portions of the project have been copied from
  https://github.com/funkaoshi/randomcharacter and is copyrighted by
  Copyright (c) 2014 Ramanan Sivaranjan under the terms of the MIT license.
-->
<html>
  <head>
    <meta name="viewport" content="width=480"/>
    <title>A Random {{ c.klass }} for Bastards</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Josefin+Sans:400,700|Metamorphous" type="text/css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@6.9.96/css/materialdesignicons.min.css" type="text/css">
    <link rel="stylesheet" href="/static/create.css" type="text/css" media="screen" title="site style" charset="utf-8">
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
    <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
    <script type="text/javascript">
      $(function () {
        $("#extras").masonry({
          itemSelector : ".block",
        });
      });
      function copyLink() {
        navigator.clipboard.writeText(`${window.location.origin}/bastards/{{character_id}}${window.location.search}`);
      }
      function createCharacter() {
        window.location.assign(`${window.location.origin}/bastards/`);
      }
      function createCommoner() {
        window.location.assign(`${window.location.origin}/bastards/?commoner=true`);
      }
      function createWithExtraClasses() {
      window.location.assign(`${window.location.origin}/bastards/?extra_classes=true`);
      }
    </script>
  </head>
  <body>
    <div id="container" class="{% block page_class %}default{% endblock %}">
      <h2 class="system">Bastards</h2>
      <h1>{{ c.klass }}</h1>
      
      <table class="attr">
        <tr>
          <td><strong>Strength</strong>: {{ c.stats.strength }}</td>
          <td><strong>Luck</strong><span class="mdi mdi-clover">: {{ c.stats.luck}}</span></td>
        </tr>
        <tr>
          <td><strong>Dexterity</strong>: {{ c.stats.dexterity }}</td>
          <td><strong>HP</strong><span class="mdi mdi-heart">: {{c.hp}}</span></td>
        </tr>
        <tr>
          <td><strong>Wisdom</strong>: {{ c.stats.wisdom }}</td>
          <td><strong>AC</strong><span class="mdi mdi-shield">: {{c.ac}}</span></td>
        </tr>
      </table>
      
      {%- for ability in c.abilities %}
      <p>{{ability}}</p>
      {%- endfor %}
      
      <div id="extras">
        <div class="block">
          <h3>Inventory</h3>
          <strong>Load</strong><span class="mdi mdi-bag-personal">: {{c.inventory | sum(attribute='slots')}}/{{c.max_load}}</span>
          <ol>
            {% for item in c.inventory%}
            {%- if item.quantity is defined and item.quantity > 1 %}
              <li>{{ item.name }} (qty: {{item.quantity}})</li>
            {%- elif item.info is defined %}
              <li>{{ item.name }}: {{item.info}}</li>
            {%- elif item.size is defined %}
              <li>{{ item.name }}: ({{item.size.name}}
                {%- if item.throwable is true -%}, throwable{%- endif -%}
                {%- if item.ranged is true -%}, ranged{%- endif -%}
                {%- if item.twohanded is true -%}, two-handed{%- endif -%})</li>
            {%- else %}
              <li>{{ item.name }}</li>
            {% endif %}
            {% endfor %}
          </ol>
        </div>
        {% if c.spells %}
        <div class="block">
          <h3>Spells</h3>
          <ol>
            {% for spell in c.spells%}
            <li>{{ spell.text }}</li>
            {% endfor %}
          </ol>
        </div>
        {% endif %}
      </div>
      
      <footer>
        <tr>
          <td>
            <button class="btn" onclick="copyLink()"><span class="mdi mdi-content-copy">share</span></button>
          </td>
          {%- if create is true %}
          <td>
            <button class="btn" onclick="createCharacter()"><span class="mdi mdi-account">create</span></button>
          </td>
          <td>
            <button class="btn" onclick="createCommoner()"><span class="mdi mdi-account-minus">commoner</span></button>
          </td>
          <td>
            <button class="btn" onclick="createWithExtraClasses()"><span class="mdi mdi-account-star">extra classes</span></button>
          </td>
          {%- endif %}
        </tr>
        <br>
        <a href="https://ko-fi.com/gtmanfred">buy me a coffee</a>
        <br>
        <a href="https://github.com/gtmanfred/portfolio">github</a>
      </footer>
    </div>
  </body>
</html>
